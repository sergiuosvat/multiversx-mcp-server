
> multiversx-mcp-server@1.0.0 test
> jest src/__tests__/server.test.ts

(node:74139) Warning: `--localstorage-file` was provided without a valid path
(Use `node --trace-warnings ...` to show where the warning was created)
FAIL src/__tests__/server.test.ts
  MCP Server Integration
    ✕ should handle create_purchase_transaction (1 ms)
    ✕ should handle generate_guarded_tx

  ● MCP Server Integration › should handle create_purchase_transaction

    Not connected

      11 |
      12 |     it("should handle create_purchase_transaction", async () => {
    > 13 |         const response = await server.request(
         |                                       ^
      14 |             {
      15 |                 method: "tools/call",
      16 |                 params: {

      at node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:1083:29
      at Server.request (node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:1077:16)
      at Object.<anonymous> (src/__tests__/server.test.ts:13:39)

  ● MCP Server Integration › should handle generate_guarded_tx

    Not connected

      32 |
      33 |     it("should handle generate_guarded_tx", async () => {
    > 34 |         const response = await server.request(
         |                                       ^
      35 |             {
      36 |                 method: "tools/call",
      37 |                 params: {

      at node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:1083:29
      at Server.request (node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:1077:16)
      at Object.<anonymous> (src/__tests__/server.test.ts:34:39)

---------------|---------|----------|---------|---------|-------------------
File           | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
---------------|---------|----------|---------|---------|-------------------
All files      |   28.48 |     5.97 |    7.69 |   28.83 |                   
 src           |   36.06 |    15.38 |   33.33 |   36.06 |                   
  server.ts    |   36.06 |    15.38 |   33.33 |   36.06 | 48,168-261        
 src/logic     |   19.38 |        0 |       0 |   19.79 |                   
  accounts.ts  |   27.27 |      100 |       0 |   27.27 | 23-27,39-43       
  checkout.ts  |   14.28 |        0 |       0 |   15.38 | 19-43             
  guardians.ts |      40 |      100 |       0 |      40 | 17-33             
  search.ts    |   10.34 |        0 |       0 |   10.71 | 23-87             
  tracking.ts  |   17.64 |        0 |       0 |   17.64 | 11-59             
  transfers.ts |      25 |        0 |       0 |      25 | 31-40,47-66       
  wallet.ts    |      30 |        0 |       0 |      30 | 13-22             
 src/utils     |     100 |      100 |     100 |     100 |                   
  config.ts    |     100 |      100 |     100 |     100 |                   
---------------|---------|----------|---------|---------|-------------------
Jest: "global" coverage threshold for statements (90%) not met: 28.48%
Jest: "global" coverage threshold for branches (90%) not met: 5.97%
Jest: "global" coverage threshold for lines (90%) not met: 28.83%
Jest: "global" coverage threshold for functions (90%) not met: 7.69%
Test Suites: 1 failed, 1 total
Tests:       2 failed, 2 total
Snapshots:   0 total
Time:        1.032 s
Ran all test suites matching src/__tests__/server.test.ts.
