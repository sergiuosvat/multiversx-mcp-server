
> multiversx-mcp-server@1.0.0 test
> jest src/__tests__/server.test.ts

(node:74538) Warning: `--localstorage-file` was provided without a valid path
(Use `node --trace-warnings ...` to show where the warning was created)
FAIL src/__tests__/server.test.ts
  MCP Server Integration
    ✓ should handle create_purchase_transaction (2 ms)
    ✕ should handle generate_guarded_tx (2 ms)

  ● MCP Server Integration › should handle generate_guarded_tx

    expect(received).toBe(expected) // Object.is equality

    Expected: "10"
    Received: 10

      63 |         expect(tx.version).toBe(2);
      64 |         expect(tx.options).toBe(2);
    > 65 |         expect(tx.nonce).toBe("10");
         |                          ^
      66 |         expect(tx.guardian).toBeDefined();
      67 |     });
      68 | });

      at Object.<anonymous> (src/__tests__/server.test.ts:65:26)

---------------|---------|----------|---------|---------|----------------------------
File           | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s          
---------------|---------|----------|---------|---------|----------------------------
All files      |   43.63 |    17.91 |   38.46 |   43.55 |                            
 src           |   52.45 |    34.61 |   66.66 |   52.45 |                            
  server.ts    |   52.45 |    34.61 |   66.66 |   52.45 | 48,171-173,192-194,206-261 
 src/logic     |   34.69 |     7.31 |      30 |   34.37 |                            
  accounts.ts  |   27.27 |      100 |       0 |   27.27 | 23-27,39-43                
  checkout.ts  |     100 |     37.5 |     100 |     100 | 14-27                      
  guardians.ts |     100 |      100 |     100 |     100 |                            
  search.ts    |   10.34 |        0 |       0 |   10.71 | 23-87                      
  tracking.ts  |   17.64 |        0 |       0 |   17.64 | 11-59                      
  transfers.ts |      25 |        0 |       0 |      25 | 31-40,47-66                
  wallet.ts    |      30 |        0 |       0 |      30 | 13-22                      
 src/utils     |     100 |      100 |     100 |     100 |                            
  config.ts    |     100 |      100 |     100 |     100 |                            
---------------|---------|----------|---------|---------|----------------------------
Jest: "global" coverage threshold for statements (90%) not met: 43.63%
Jest: "global" coverage threshold for branches (90%) not met: 17.91%
Jest: "global" coverage threshold for lines (90%) not met: 43.55%
Jest: "global" coverage threshold for functions (90%) not met: 38.46%
Test Suites: 1 failed, 1 total
Tests:       1 failed, 1 passed, 2 total
Snapshots:   0 total
Time:        0.949 s, estimated 1 s
Ran all test suites matching src/__tests__/server.test.ts.
